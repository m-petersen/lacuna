# Lacuna Configuration File
# =========================
# Copy this file and modify for your analysis.
# Pass to lacuna with: lacuna --config my_config.yaml
#
# Generate this template: lacuna --generate-config > my_config.yaml
#
# This config uses the EXTENSIBLE FORMAT with:
#   - connectomes: section for registering connectome resources with explicit space
#   - analyses: section for configuring any analysis from the registry

# =============================================================================
# MASK SPACE CONFIGURATION
# =============================================================================
# The coordinate space of your input mask images.
# Required if not detectable from filename (e.g., _space-MNI152NLin6Asym_)
# or sidecar JSON.
#
# Common spaces:
#   - MNI152NLin6Asym (FSL's MNI template)
#   - MNI152NLin2009cAsym (fMRIPrep default)
#
# Resolution is automatically detected from image voxel size.

mask_space: MNI152NLin6Asym

# =============================================================================
# SUBJECT FILTERING (for BIDS datasets)
# =============================================================================

# Subject IDs to process (without 'sub-' prefix)
# Empty list = process all subjects
subjects: []
  # - "001"
  # - "002"

# Session IDs to process (without 'ses-' prefix)
# Empty list = process all sessions
sessions: []
  # - "01"

# Glob pattern to filter mask files
# Examples: "*label-WMH*", "*label-lesion*", "*acuteinfarct*"
pattern: null

# =============================================================================
# CONNECTOMES SECTION
# =============================================================================
# Register connectome resources with explicit space information.
# If not downloaded yet see: lacuna fetch --help
#
# Supported types:
#   - functional: HDF5 file or directory with batched files (auto-detected)
#   - structural: .tck tractogram file (auto-detected from extension)

connectomes:


  # Example functional connectome (GSP1000)
  # functional:
  #   path: /path/to/gsp1000_connectome.h5
  #   space: MNI152NLin6Asym
  #   resolution: 2  # Optional, auto-detected from file if not provided

  # Example structural connectome (dTOR)
  # structural:
  #   path: /path/to/dTOR.tck
  #   space: MNI152NLin6Asym
  #   resolution: 2  # Resolution of the TDI output
  #   tdi_path: /path/to/precomputed_tdi.nii.gz  # Optional, speeds up processing

# =============================================================================
# ANALYSES SECTION
# =============================================================================
# Configure analyses using names from the analysis registry.
# Any analysis registered with BaseAnalysis can be configured here.
#
# Available analyses (use lacuna --list-analyses to see all):
#   - RegionalDamage: Quantifies lesion overlap with brain parcellations
#   - FunctionalNetworkMapping: Maps functional connectivity disruption
#   - StructuralNetworkMapping: Maps white matter disconnection
#   - ParcelAggregation: Aggregates voxel-wise maps to parcellation ROIs

analyses:
  # RegionalDamage: Quantifies lesion overlap with brain parcellations
  RegionalDamage:
    parcel_names:
      - Schaefer2018_100Parcels7Networks


  # FunctionalNetworkMapping: Maps functional connectivity disruption
  # Uncomment and provide a connectome reference to enable
  # FunctionalNetworkMapping:
  #   connectome: functional  # Reference to connectomes section
  #   method: boes  # "boes" (mean) or "pini" (PCA-based)
  #   pini_percentile: 20  # For PINI method only
  #   compute_p_map: true  # Compute p-value map (two-tailed)
  #   fdr_alpha: 0.05  # FDR correction alpha level (null to disable)
  #   # t_threshold: 9.0  # Optional threshold for binary mask
  #   return_in_input_space: true  # Transform outputs to input mask space

  # StructuralNetworkMapping: Maps white matter disconnection
  # Requires MRtrix3 installation
  # Uncomment and provide a connectome reference to enable
  # StructuralNetworkMapping:
  #   connectome: structural  # Reference to connectomes section
  #   output_resolution: 2
  #   cache_tdi: true
  #   n_jobs: 1
  #   keep_intermediate: false
  #   # parcellation_name: Schaefer2018_100Parcels7Networks
  #   # compute_disconnectivity_matrix: false
  #   # show_mrtrix_output: false

  # ParcelAggregation: Aggregate voxel-wise maps to parcellation ROIs
  # Uncomment to enable aggregation of network mapping outputs
  # ParcelAggregation:
  #   source:
  #     FunctionalNetworkMapping:
  #       - rmap
  #       - tmap
  #       - zmap
  #       - pmap
  #       - pfdrmap
  #       - pfdrthresholdmap  # Binary mask of FDR-significant voxels
  #     StructuralNetworkMapping: 
  #       - disconnection_map
  #   aggregation: mean  # mean, sum, percent, volume, median, std
  #   parcel_names:
  #     - Schaefer2018_100Parcels7Networks
  #   # threshold: 0.5  # For probabilistic atlases

# =============================================================================
# PERFORMANCE OPTIONS
# =============================================================================
# Number of parallel processes (-1 = all CPUs)
n_jobs: 1

# Temporary directory for intermediate files
tmp_dir: null

# =============================================================================
# LOGGING
# =============================================================================
# Enable verbose output (true/false)
verbose: false
